{% extends 'home/base_shop.html' %}
{% load static %}

{% block links %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}

{% block title %}درخواست برداشت و پرداخت{% endblock %}

{% block open1 %}
open
{% endblock %}

{% block open1-active1 %}
active
{% endblock %}

{% block content %}
<div class="cintainer">
	{% if product_images %}
	<div class="row py-2">
		<div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
			<div class="carousel-inner">
				{% for image in product_images %}
					<div class="carousel-item active"> <!-- active باید فقط در یک عکس باشه-->
						<img src="{{image.image.url}}" style="max-height: 300px;"
							class="d-block w-100" alt="">
					</div>
				{% endfor %}
			</div>
			<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying"
				data-bs-slide="prev">
				<span class="carousel-control-prev-icon" aria-hidden="true"></span>
				<span class="visually-hidden">Previous</span>
			</button>
			<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying"
				data-bs-slide="next">
				<span class="carousel-control-next-icon" aria-hidden="true"></span>
				<span class="visually-hidden">Next</span>
			</button>
		</div>
	</div>
	{% endif %}
	<div class="row my-2">
		<div class="card">
			<div class="row p-3">
				<div class="col-md-6 py-2">
					<div class="input-group">
						<span class="text-warning">نام:</span>
						<p>{{product.name}}</p>
					</div>
				</div>
				<div class="col-md-6 py-2">
					<div class="input-group">
						<span class="text-warning">حداکثر فروش:</span>
						<p>{{product.max_sel}}</p>
					</div>
				</div>
				<div class="col-md-6 py-2">
					<div class="input-group">
						<span class="text-warning">قیمت:</span>
						<p>{{product.price}}</p>
					</div>
				</div>
				<div class="col-md-6 py-2">
					<div class="input-group">
						<span class="text-warning">فروشگاه:</span>
						<p>{{product.shop}}</p>
					</div>
				</div>
				<div class="col-md-6 py-2">
					<div class="input-group">
						<span class="text-warning">دسته بندی:</span>
						{% if category_lists %}
							{% for category in category_lists %}
								<p>{{category.name}},&nbsp;</p>
							{% endfor %}
						{% else %}
						<p>بدون دسته بندی</p>
						{% endif %}
					</div>
				</div>
				<div class="col-10 col-sm-12 py-2">
					<h5 class="text-warning">توضیحات:</h4>
						{% if product.description %}
						<p>{{product.description}}</p>
						{% else %}
						<p>بدون توضیحات</p>
						{% endif %}
				</div>
			</div>
		</div>
		<div class="row my-3">
			<div class="card">
				<div class="row">
						<div class="col-md-6 cil-sm-12">
							<h5 class="">سود فروش این هفته</h5>
							<canvas id="myChart"></canvas>
						</div>
						<div class="col-md-6 cil-sm-12">
							<h5 class="">تعداد فروش این هفته</h5>
							<canvas id="myChart2"></canvas>
						</div>
						<script>
							const ctx = document.getElementById('myChart');

							new Chart(ctx, {
								type: 'bar',
								data: {
									labels: ['{{info_1_day_time}}', '{{info_2_day_time}}', '{{info_3_day_time}}', '{{info_4_day_time}}', '{{info_5_day_time}}', '{{info_6_day_time}}', '{{info_7_day_time}}'],
									datasets: [{
										label: 'درامد ',
										data: ['{{info_1_day.sum_price}}', '{{info_2_day.sum_price}}', '{{info_3_day.sum_price}}', '{{info_4_day.sum_price}}', '{{info_5_day.sum_price}}', '{{info_6_day.sum_price}}', '{{info_7_day.sum_price}}',],
										borderWidth: 1
									}]
								},
								options: {
									scales: {
										y: {
											beginAtZero: true
										}
									}
								}
							});
						</script>
						<script>
							const ctx2 = document.getElementById('myChart2');

							new Chart(ctx2, {
								type: 'bar',
								data: {
									labels: ['{{info_1_day_time}}', '{{info_2_day_time}}', '{{info_3_day_time}}', '{{info_4_day_time}}', '{{info_5_day_time}}', '{{info_6_day_time}}', '{{info_7_day_time}}'],
									datasets: [{
										label: 'تعداد ',
										data: ['{{info_1_day.count}}', '{{info_2_day.count}}', '{{info_3_day.count}}', '{{info_4_day.count}}', '{{info_5_day.count}}', '{{info_6_day.count}}', '{{info_7_day.count}}',],
										borderWidth: 1
									}]
								},
								options: {
									scales: {
										y: {
											beginAtZero: true
										}
									}
								}
							});
						</script>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}